start_playing:
  alias: Start Playing
  sequence:
  - variables: # Identifier for target mediaplayer, must be same as in helper file
      speaker: > 
        {% if is_state("input_select.radio_speaker", "Livingroom") %} 
          media_player.chromecast3287  # Entity ID of mediaplayer
        {% elif is_state("input_select.radio_speaker", "Kitchen") %} 
          media_player.mediabox  # Entity ID of mediaplayer
        {% endif %}
  - service: media_player.volume_set
    target:
      entity_id: "{{ speaker }}"
    data:
      volume_level: '{{ states("input_number.radio_volume") }}'
  - choose:
# Example using MP3 audio file 
    - conditions: '{{ is_state("input_select.radio_source", "MP3") }}' # unique identifier of item, must be the same name as in helper file
      sequence:
        - service: media_player.play_media
          target:
            entity_id: "{{ speaker }}"
          data:
              media_content_type: audio/mp3
              media_content_id: https://file-examples-com.github.io/uploads/2017/11/file_example_MP3_5MG.mp3  # URL to audiofile
              extra: # This block is optional but displays metadata on a screen if cast to a chromecast
                metadata:
                  metadataType: 3
                  title: My cool MP3  # (optional) Title of the audiofile or song
                  artist: Ben Coolio  # (optional) Name of the artits
                  images: # (optional) URl to image/albumart to display on screen
                    - url: >-
                        https://i1.sndcdn.com/artworks-000040478331-59oz19-t500x500.jpg
# Example for a online (radio)stream  
    - conditions: '{{ is_state("input_select.radio_source", "Hallo Kids Radio") }}' # unique identifier of item, must be the same name as in helper file
      sequence:
        - service: media_player.play_media
          target:
            entity_id: "{{ speaker }}"
          data:
              media_content_type: audio/mp3
              media_content_id: https://ice.cr1.streamzilla.xlcdn.com:8000/sz=Hallokidsradio=mp3  # Streamurl
              extra: # This block is optional but displays metadata on a screen if cast to a chromecast
                metadata:
                  metadataType: 3
                  title: HalloKids Radio # (optional) Title of radiostation
                  images: # (optional) URl to station image/logo to display on screen
                    - url: >-
                        https://www.hallokidsradio.nl/wp-content/uploads/2021/03/Logo_HKR-300x150.png
# Example for Youtube Video                     
    - conditions: '{{ is_state("input_select.radio_source", "Youtube") }}' # unique identifier of item, must be the same name as in helper file
      sequence:
        - service: media_player.play_media
          target:
            entity_id: "{{ speaker }}"
          data:
            media_content_type: cast
            media_content_id: ' { "app_name": "youtube", "media_id": "dQw4w9WgXcQ" }' # Get the media_id from last part of youtube video URL (https://youtu.be/dQw4w9WgXcQ)
            
  icon: mdi:play
  mode: single
